<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç¢ºç‡ãƒœã‚¿ãƒ³ã‚²ãƒ¼ãƒ </title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#007aff">

<style>
body {
  font-family: sans-serif;
  text-align: center;
  padding: 20px;
  background: #f5f5f5;
}

h1 { font-size: 26px; }
#result { font-size: 34px; margin: 20px 0; min-height: 50px; }
#counter { font-size: 20px; margin-bottom: 15px; }

.hit {
  color: red;
  font-weight: bold;
}

input {
  font-size: 20px;
  width: 120px;
  padding: 5px;
  text-align: center;
}

button {
  font-size: 22px;
  padding: 15px;
  margin: 10px;
  width: 90%;
  max-width: 300px;
  border: none;
  border-radius: 10px;
  background: #007aff;
  color: white;
}
</style>
</head>

<body>

<h1>ç¢ºç‡ãƒœã‚¿ãƒ³ã‚²ãƒ¼ãƒ </h1>

<p>
ç¢ºç‡ï¼š1 /
<input type="number" id="denominator" value="10" min="1" max="99999">
</p>

<div id="counter">è©¦è¡Œå›æ•°ï¼š0å›</div>
<div id="result">å¾…æ©Ÿä¸­</div>

<button id="startBtn">ã‚¹ã‚¿ãƒ¼ãƒˆ</button><br>
<button id="nextBtn">æ¬¡ã¸</button>

<audio id="hitSound" src="https://ringtones.miyanova.com/data/1066.mp3"></audio>

<script>
let hit = false;
let count = 0;

const result = document.getElementById("result");
const counter = document.getElementById("counter");
const denomInput = document.getElementById("denominator");

document.getElementById("startBtn").onclick = () => {
  if (hit) return;

  let d = parseInt(denomInput.value);
  if (!d || d < 1) d = 1;
  if (d > 99999) d = 99999;

  denomInput.value = d;
  denomInput.disabled = true;

  count++;
  counter.textContent = "è©¦è¡Œå›æ•°ï¼š" + count + "å›";

  const r = Math.floor(Math.random() * d) + 1;

  if (r === 1) {
    result.textContent = `ğŸ‰ ${count}å›ã§å½“ãŸã‚Šï¼`;
    result.classList.add("hit");
    document.getElementById("hitSound").play();
    hit = true;
  } else {
    result.textContent = "ã¯ãšã‚Œâ€¦";
  }
};

document.getElementById("nextBtn").onclick = () => {
  hit = false;
  count = 0;
  result.textContent = "å¾…æ©Ÿä¸­";
  counter.textContent = "è©¦è¡Œå›æ•°ï¼š0å›";
  result.classList.remove("hit");
  denomInput.disabled = false;
};

if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("service-worker.js");
}
</script>

</body>
</html>
